---
date: 2024-07-18T10:24:35+08:00
lastMod: 2024-07-18T11:05:58+08:00
title: 知之工具站无服务器思考
---

开发了一个工具网站 www.zzutil.com
一些简单功能倒是前端可直接处理，或者利用wasm处理。但不可避免一些功能的确需要后端，比如调用pandoc等。

服务器太贵了，加上又没什么流量，所以不打算买服务器，网站打包成静态页面，随便找个托管服务都行，但后端处理这部分怎么办？我的网站主要功能是文件处理，需要高性能能服务器。

最开始想到的是利用一些免费的函数服务，如aws。弊端是需要安装软件时麻烦，而且代码也得按他们的要求来，还得自己打依赖包，上传依赖包。放弃。

然后用了一个无服务器平台zeabur，弊端也是无法安装软件，无法执行apt install命令


最后我想了个办法，利用空闲主机或电脑做分布式任务调度。


- 利用免费的mqtt做任务队列，
- 利用免费的无服务器（几乎只能调用标准库）应用暂存文件
- 局域网机器

# 处理流程
1. 用户侧提交任务到数据或文件到云服务
2. 用户侧发布job
3. 节点监听任务主题，并处理任务，上传处理结果。发布处理状态
4. 用户侧监听任务处理状态并显示，如果任务完成则显示结果或下载链接
